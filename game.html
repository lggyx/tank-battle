<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>坦克大战 - 战场</title>
  <style>
    html, body { height: 100%; }
    body { margin: 0; background: url('assets/images/index.jpg') no-repeat center center fixed; background-size: cover; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #fff; }
    .container { display: grid; place-items: center; height: 100%; }
    .hud { position: fixed; left: 16px; top: 16px; right: 16px; display: flex; align-items: center; justify-content: space-between; background: rgba(0,0,0,0.55); border: 1px solid #ffd700; border-radius: 10px; padding: 10px 12px; box-shadow: 0 0 12px rgba(255,215,0,0.35); }
    .hud-left { display: flex; gap: 14px; align-items: center; }
    .stat { font-weight: 700; }
    .enemy-icons { display: inline-block; min-height: 24px; }
    .enemy-tank { display: inline-block; width: 10px; height: 10px; background: #00ff00; border: 1px solid #ffd700; margin-right: 2px; }
    .btn { appearance: none; border: 1px solid #ffd700; border-radius: 8px; padding: 8px 12px; background: rgba(0,0,0,0.5); color: #fff; cursor: pointer; font-weight: 700; }
    .canvas-wrap { border: 2px solid #ffd700; border-radius: 10px; background: rgba(0,0,0,0.45); }
    canvas { image-rendering: pixelated; display: block; }
    /* Screens */
    .screen { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); z-index: 1000; }
    .screen .box { padding: 20px 28px; border: 2px solid #ffd700; border-radius: 12px; background: rgba(0,0,0,0.65); box-shadow: 0 0 16px rgba(255,215,0,0.4); }
    .screen h2 { margin: 0 0 8px 0; color: #ffd700; }
    .screen p { margin: 6px 0 14px 0; color: #00ff00; }
  </style>
</head>
<body>
  <div class="hud">
    <div class="hud-left">
      <span class="stat">关卡：<span id="current-level">1</span></span>
      <span class="stat">敌军剩余：<span id="enemies-left">0</span></span>
      <span class="stat">生命：<span id="player-lives">3</span></span>
      <span class="stat">分数：<span id="player-score">0</span></span>
      <span class="enemy-icons" id="enemy-tanks-container"></span>
    </div>
    <div>
      <button class="btn" id="pauseBtn" onclick="game.togglePause()">暂停(P)</button>
      <a class="btn" href="index.html">返回首页</a>
    </div>
  </div>

  <div class="container">
    <div class="canvas-wrap">
      <!-- 与 js/const.js 保持一致尺寸 -->
      <canvas id="gameCanvas" width="512" height="448" aria-label="游戏画面"></canvas>
    </div>
  </div>

  <!-- Screens -->
  <div class="screen" id="loadingScreen">
    <div class="box">
      <h2>正在加载 · 第 <span id="stage-number">1</span> 关</h2>
      <div style="color:#00ff00">关卡名称</div>
    </div>
  </div>
  <div class="screen" id="pauseScreen">
    <div class="box">
      <h2>已暂停</h2>
      <p>按 P 或点击继续</p>
      <button class="btn" onclick="game.togglePause()">继续</button>
    </div>
  </div>
  <div class="screen" id="gameOverScreen">
    <div class="box">
      <h2>失败</h2>
      <p>基地或玩家阵亡</p>
      <button class="btn" id="restartButton">重新开始</button>
    </div>
  </div>
  <div class="screen" id="gameWinScreen">
    <div class="box">
      <h2>胜利</h2>
      <p>清除敌军</p>
      <button class="btn" id="nextLevelButton">进入下一关</button>
    </div>
  </div>

  <!-- 资源与核心逻辑 -->
  <script src="js/const.js"></script>
  <script src="js/game.js"></script>
  <script>
    let game;
    window.addEventListener('load', function(){
      game = new Game('gameCanvas');
    });
    // 键盘 P 暂停（与 game.js 保持一致）
    document.addEventListener('keydown', (e)=>{ if(e.code==='KeyP'){ game && game.togglePause(); }});
  </script>
</body>
</html>
